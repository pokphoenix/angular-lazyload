<app-form-header></app-form-header>
<h2>Registor form</h2>
<form [formGroup]="registrationForm">
    <div class="form-group">
        <label for="name">username</label>
        <input type="text" formControlName="userName"  
            name="name" id="name" placeholder="" 
            class="form-control"
            [class.is-invalid]="userName.invalid 
            && userName.touched"
        >
        <!--<small class="text-danger"
            [class.d-none]="registrationForm.get('userName').valid || 
            registrationForm.get('userName').untouched"
        >Username is required</small>-->
        <div *ngIf="userName.invalid 
            && userName.touched">
            <small class="text-danger" *ngIf="userName.errors?.required">Username is Require</small>
            <small class="text-danger" *ngIf="userName.errors?.minlength">Username must be at least 3 characters</small>
            <small class="text-danger" *ngIf="userName.errors?.forbiddenName"> {{ userName.errors?.forbiddenName.value }} Username not allowed</small>
        </div>
    </div>

    <div class="form-group">
        <label for="">Email</label>
        <button class="btn btn-secondary btn-sm m-2" type="button"
            (click)="addAlternateEmail()"
        >
            Add e-mail
        </button>
        <input type="email" formControlName="email"
            class="form-control"
            [class.is-invalid]="email.invalid
            && email.touched"
            >
            <small class="text-danger" 
                [class.d-none]="email.valid || email.untouched"
            >Email is required</small>
        <div formArrayName="alternateEmails" *ngFor="let email of alternateEmails.controls;let i = index;">
            <input type="text" class="form-control my-1" [formControlName]="i">
        </div>    
    </div>
    <div class="form-check">
        <input type="checkbox" formControlName="subscribe"
            class="form-check-input" 
        >
        <label class="form-check-label">
            Send me promotion offers (if checked must be input email)
        </label>
    </div>


    <div class="form-group">
        <label for="">Password</label>
        <input type="password" formControlName="password"
            class="form-control" >
    </div>
    <div class="form-group">
        <label for="">Confirm Password</label>
        <input type="password" formControlName="confirmPassword"
            class="form-control"
            [class.is-invalid]="registrationForm.errors?.misMatch"
            >
        <small class="text-danger" *ngIf="registrationForm.errors?.misMatch">password do not match</small>
    </div>

    <div formGroupName="address">
        <div class="form-group">
            <label for="">City</label>
            <input type="text"
                formControlName="city"
                class="form-control"  >
        </div>
        <div class="form-group">
            <label for="">State</label>
            <input type="text"
                formControlName="state"
                class="form-control"  >
        </div>
        <div class="form-group">
            <label for="">Postal Code</label>
            <input type="text"
                formControlName="postalCode"
                class="form-control"  >
        </div>
    </div>
    <button type="reset" class="btn btn-danger" >Reset</button>
    <button  class="btn btn-primary ml-2" type="submit">Registor</button>
    <button (click)="loadApiDataAll()"  class="btn btn-secondary ml-2" type="button">Load API data All</button>
    <button (click)="loadApiDataPatch()"  class="btn btn-dark ml-2" type="button">Load API data PAtch</button>
</form>

{{ registrationForm.value | json }}